pipeline {
    agent any
    environment {
        app = 'Davids App'
        file = 'Files/File1.txt'
        
    }
    stages {
        stage('Pre Requests') {
            steps {
                sh '''
                rm -rf *
                mkdir -p Files                
                '''
            }
        }
        stage('Building Stage') {
            steps {
                sh '''
                echo "Starting Building $app"
                echo "Starting Building $app" >> $file
                cat $file
                '''
            }
        }
        stage('Check Status Stage') {
            steps {
                sh '''
                def count = (script: "wc -m < ${File}", returnStdout: true)
                test -f $file
                if [ "$count" -ge 5 ]; then
                echo "$app Succesfuli Deploy"
                else
                echo "The Deployment of $app Faild"
                '''
            }
        }
    }
}
