pipeline {
    agent any
    environment {
        app = 'Davids App'
        
    }
    stages {
        stage('Pre Requests') {
            steps {
                sh '''
                rm -rf *
                mkdir -p Files
                '''
            }
        }
        stage('Building Stage') {
            steps {
                sh '''
                file1='Files/File1.txt'
                file2='Files/File2.txt'
                echo "Starting Building $app"
                echo "Starting Building $app" >> $file1
                echo "50" >> $file2
                '''
            }
        }
        stage('Check Status Stage') {
            steps {
                sh '''
                file2='Files/File2.txt'               
                testnumber=$(cat file2)
                if [ "$testnumber" -le 30 ]; then
                    echo "deployment of $app faild"
                else
                    echo "$app Deploy Succesfuly"
                fi
                '''
            }
        }
    }
}
