pipeline {
    agent any
    environment {
        app = 'Davids App'
        file = 'Files/File1.txt'
    }
    stages {
        stage('Pre Requests') {
            steps {
                sh '''
                rm -rf *
                mkdir -p Files                
                '''
            }
        }
        stage('Building Stage') {
            steps {
                sh '''
                echo "Starting Building $app"
                echo "Starting Building $app" >> $file
                cat $file
                '''
            }
        }
        stage('Check Status Stage') {
            steps {
                sh '''
                def fileContent = sh(script: "cat $file", returnStdout: true).trim()
                    if (fileContent.length() >= 5) {
                        echo "$app: Build successful"
                    } else {
                        echo "$app: Build failed - file content too short"
                    }
                '''
            }
        }
    }
}
