pipeline {
    agent any
    environment {
        app = 'Davids App'
        
    }
    stages {
        stage('Pre Requests') {
            steps {
                sh '''
                rm -rf *
                mkdir -p Files
                '''
            }
        }
        stage('Building Stage') {
            steps {
                sh '''
                file1='Files/File1.txt'
                file2='Files/File2.txt'
                echo "Starting Building $app"
                echo "Starting Building $app" >> $file1
                echo "37" >> $file2
                '''
            }
        }
        stage('Check Status Stage') {
            steps {
                sh '''
                file1='Files/File1.txt'
                file2='Files/File2.txt'
                count1=$(wc -m < $file1)
                count2=$(wc -m < $file2)
                
                if [ $count1 -ge 5 ]; then
                    echo "$app: Build successful"
                else
                    echo "$app: Build failed "
                fi

                if [ $count2 -lt 40]; then
                    echo "deployment of $app faild"
                if [ $count2 -ge 40]; then
                    echo "$app Deploy Succesfuly"
                fi
                '''
            }
        }
    }
}
